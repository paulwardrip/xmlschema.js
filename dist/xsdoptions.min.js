function XsSimpleTypeValidator(a,b){this.xml=a;var c=this.xml.getElementsByTagName("restriction")[0];c&&(this.base=this.xml.getElementsByTagName("restriction")[0].getAttribute("base")),this.length=this.xml.getElementsByTagName("length")[0]?this.xml.getElementsByTagName("length")[0].getAttribute("value"):0,this.minLength=this.xml.getElementsByTagName("minLength")[0]?this.xml.getElementsByTagName("minLength")[0].getAttribute("value"):0,this.maxLength=this.xml.getElementsByTagName("maxLength")[0]?this.xml.getElementsByTagName("maxLength")[0].getAttribute("value"):0,this.pattern=this.xml.getElementsByTagName("pattern")[0]?this.xml.getElementsByTagName("pattern")[0].getAttribute("value"):null,this.isNumber=function(){var a=!1,b=this.base,c=["byte","decimal","double","int","float","integer","long","negativeInteger","nonNegativeInteger","nonPositiveInteger","positiveInteger","short","unsignedLong","unsignedInt","unsignedShort","unsignedByte"];return c.some(function(c){if("xs:"+c===b)return a=!0,!0}),a},this.isNumber()&&(this.fractionDigits=this.xml.getElementsByTagName("fractionDigits")[0]?this.xml.getElementsByTagName("fractionDigits")[0].getAttribute("value"):null,this.maxInclusive=this.xml.getElementsByTagName("maxInclusive")[0]?this.xml.getElementsByTagName("maxInclusive")[0].getAttribute("value"):null,this.maxExclusive=this.xml.getElementsByTagName("maxExclusive")[0]?this.xml.getElementsByTagName("maxExclusive")[0].getAttribute("value"):null,this.minInclusive=this.xml.getElementsByTagName("minInclusive")[0]?this.xml.getElementsByTagName("minInclusive")[0].getAttribute("value"):null,this.minExclusive=this.xml.getElementsByTagName("minExclusive")[0]?this.xml.getElementsByTagName("minExclusive")[0].getAttribute("value"):null,this.totalDigits=this.xml.getElementsByTagName("totalDigits")[0]?this.xml.getElementsByTagName("totalDigits")[0].getAttribute("value"):null);var d=[];Array.prototype.slice.call(this.xml.getElementsByTagName("enumeration")).forEach(function(a){d.push(a.getAttribute("value"))}),this.enumeration=d,this.validate=function(a){function c(a){d.valid=!1,d.error=a}var d={valid:!0};if(this.enumeration.length>0){var e=!1;this.enumeration.forEach(function(b){if(a===b)return e=!0,!0}),e||c("Value of "+b+" does not match enumerated options.")}else this.isNumber()?/^[0-9.\-]*$/.test(a)?this.minInclusive&&parseFloat(a)<this.minInclusive?c("Value of "+b+" should be greater than "+this.minInclusive+" (inclusive)."):this.minExclusive&&parseFloat(a)<=this.minExclusive?c("Value of "+b+" should be greater than "+this.minExclusive+" (exclusive)."):this.maxInclusive&&parseFloat(a)>this.maxInclusive?c("Value of "+b+" should be less than "+this.maxInclusive+" (inclusive)."):this.maxExclusive&&parseFloat(a)>=this.maxExclusive?c("Value of "+b+" should be greater than "+this.maxExclusive+" (exclusive)."):this.totalDigits&&this.totalDigits!==a.replace(/\./,"").length?c("Value of "+b+" should be "+this.totalDigits+" digits."):this.fractionDigits&&this.fractionDigits<a.split(/\./)[1].length&&c("Value of "+b+" should have only "+this.fractionDigits+" digits past the decimal."):c("Value of "+b+" should be numeric."):"xs:string"===this.base&&(this.length>0&&a.length!==this.length?c("Value of "+b+" should be exactly "+this.length+"characters."):this.minLength>0&&a.length<this.minLength?c("Value of "+b+" should be at least "+this.minLength+"characters."):this.maxLength>0&&a.length>this.maxLength?c("Value of "+b+" exceeds "+this.maxLength+"characters."):this.pattern&&!new RegExp(this.pattern).test(a)&&c("Value of "+b+" does not match the specified pattern."));return d}}var xmlparser={parse:function(a){function b(a,b){if("undefined"!=typeof jQuery){try{c.doc=$.parseXML(a),c.str=a,c.parser="jQuery",b&&(c.uri=b)}catch(e){d.reject("XML could not be parsed.")}c.doc?d.resolve(c):d.reject("XML could not be parsed.")}else if("undefined"!=typeof DOMParser){var f=new DOMParser;c.doc=f.parseFromString(a,"application/xml"),c.str=a,c.parser="DOMParser",b&&(c.uri=b),c.doc.getElementsByTagName("parsererror").length>0?d.reject("XML could not be parsed."):d.resolve(c)}}var c={doc:null,str:null},d=xmlparser.deferred();if("object"==typeof a){if(a instanceof XMLDocument)c.doc=a,"undefined"!=typeof XMLSerializer&&(c.str=(new XMLSerializer).serializeToString(a)),d.resolve(c);else if("undefined"!=typeof jQuery&&a instanceof jQuery){var e=$(a.children()[0]).html(),f=a.children()[0].tagName,g="<"+f;$.each(a.children()[0].attributes,function(){g+=" "+this.name+'="'+this.value+'"'}),g+=">\n"+e+"\n<"+f+">",b(g),d.resolve(c)}}else if("string"==typeof a)if(/\.(xml|xsd)$/.test(a))if("undefined"!=typeof jQuery){var h=$.get(a,{},function(c){b(c,a)},"text");h["catch"](function(){d.reject("Could not read file: "+a)})}else{var i;if("undefined"!=typeof XMLHttpRequest)i=new XMLHttpRequest;else if("undefined"!=typeof ActiveXObject)try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(j){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(k){i=null}}"undefined"!==i?(i.open("GET",a),i.setRequestHeader("Content-Type","application/xml"),i.onreadystatechange=function(){4===this.readyState&&(200===this.status?b(this.responseText,a):(c.error="Unable to request document, response code: "+this.status,d.reject(c)))},i.send(null)):(c.error="Unable to request document, browser does not support XMLHttpRequest and jQuery is not available.",d.reject(c))}else b(a);return d.promise()},deferred:function(){return"undefined"!=typeof jQuery?$.Deferred():"undefined"!=typeof Promise?function(){var a=null,b=null,c=new Promise(function(c,d){a=c,b=d});return{promise:function(){return c},resolve:a,reject:b}}():new function(){var a,b=!1,c=!1,d=[],e=[];this.resolve=function(c){b=!0,a=c,d.forEach(function(b){b(a)})},this.reject=function(b){c=!0,a=b,e.forEach(function(b){b(a)})},this.promise={then:function(c){return b?c(a):d.push(c),this},"catch":function(b){return c?b(a):e.push(b),this}}}}},xsdoptions=function(a){function b(a,b){Array.prototype.slice.call(document.querySelectorAll(a)).forEach(function(a){b(a)});var c=new MutationObserver(function(c){c.forEach(function(c){c.addedNodes.forEach(function(c){"undefined"!=typeof c.querySelectorAll&&Array.prototype.slice.call(c.querySelectorAll(a)).forEach(function(a){b(a)})})})}),d={attributes:!1,characterData:!1,childList:!0,subtree:!0};c.observe(document,d)}function c(a,b,c){if(!a.getElementsByTagName("option")||a.getElementsByTagName("option").length<=1){if(!a.getElementsByTagName("option")||0===a.getElementsByTagName("option").length){var d=document.createElement("option");d.appendChild(document.createTextNode("")),d.setAttribute("value",""),a.appendChild(d)}b.forEach(function(b){if(c){var d=a.innerHTML;d+=c(this),a.innerHTML=d}else{var e=document.createElement("option");e.appendChild(document.createTextNode(b.label)),e.setAttribute("value",b.value),a.appendChild(e)}})}}var d=[],e=xmlparser.deferred(),f=null,g={annotation:{value:function(a){if(f.doc){var b=null;return Array.prototype.slice.call(f.doc.querySelectorAll("simpleType,complexType")).some(function(c){if(c.getAttribute("name")===a)return b=c.getElementsByTagName("documentation")[0].firstChild.nodeValue,!0}),b}},property:function(a,b,c){Array.prototype.slice.call(document.querySelectorAll(a)).forEach(function(a){var d=g.annotation.value(c);a.setAttribute(b,d)})},data:function(a,b,c){if("undefined"!=typeof jQuery){var d=g.annotation.value(c);$(a).data(b,d)}},html:function(a,b){Array.prototype.slice.call(document.querySelectorAll(a)).forEach(function(a){var c=g.annotation.value(b);a.innerHTML=c})}},validate:function(a,b,c){var d=new XsSimpleTypeValidator(f.doc.querySelector("simpleType[name='"+b+"']"),c||b);return d.validate(a)},enumeration:function(a,b){return g.collection[a]&&!b?g.collection[a]:(g.collection[a]||(g.collection[a]=[]),f.doc&&(elem=f.doc.querySelector("simpleType[name='"+a+"']"),elem.getAttribute("name")===a&&Array.prototype.slice.call(elem.getElementsByTagName("enumeration")).forEach(function(b){var c=null;c=b.getElementsByTagName("documentation").length>0?b.getElementsByTagName("documentation")[0].firstChild.nodeValue:b.getAttribute("value"),g.collection[a].push({value:b.getAttribute("value"),label:c})})),console.log("Loaded "+g.collection[a].length+" enumerated options from simpleType: "+a),g.collection[a])},select:function(a,d,e){g.enumeration(d),b(a,function(a){var b=g.enumeration(d);c(a,b,e)})},collection:d,ready:e,xsd:f};if(a){var h=xmlparser.parse(a);h.then(function(a){f=a,e.resolve(g)}),h["catch"](function(a){e.reject(a)})}else"undefined"!=typeof xmlschema&&"undefined"!=typeof xmlschemadocument?(f=xmlschemadocument,e.resolve(g)):e.reject("No xsd was provided. usage: xsdoptions(xsd);");return e.promise()};